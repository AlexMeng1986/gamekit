# ---------------------------------------------------------
cmake_minimum_required(VERSION 2.6)

project(OGREKIT)
SET(OGREKIT 1.0)

if(COMMAND cmake_policy)
   cmake_policy(SET CMP0003 NEW)
endif(COMMAND cmake_policy)

# ---------------------------------------------------------
# Setup scripts
set(CMAKE_MODULE_PATH 
    ${OGREKIT_SOURCE_DIR}/CMake
    ${OGREKIT_SOURCE_DIR}/CMake/Utils
    ${OGREKIT_SOURCE_DIR}/CMake/Packages
    ${OGREKIT_SOURCE_DIR}/CMake/Templates
    )

set(OGREKIT_INSTALL_PREFIX ${OGREKIT_SOURCE_DIR}/Bin)
set(OGRE_BINARY_DIR ${OGREKIT_INSTALL_PREFIX})

include(CMakeDependentOption)
include(CheckCXXCompilerFlag)
include(DependenciesOgreKit)

set(OGRE_STATIC_LIB 1)
set(OGREKIT_LIB_TYPE STATIC)

set(OGREKIT_FREEIMAGE_TARGET    FreeImage)
set(OGREKIT_FREEIMAGE_INCLUDE   ${OGREKIT_SOURCE_DIR}/Dependencies/Source/FreeImage)
set(OGREKIT_FREETYPE_TARGET     FreeType)
set(OGREKIT_FREETYPE_INCLUDE    ${OGREKIT_SOURCE_DIR}/Dependencies/Source/FreeType/include)
set(OGREKIT_ZLIB_TARGET         Zlib)
set(OGREKIT_ZLIB_INCLUDE        ${OGREKIT_SOURCE_DIR}/Dependencies/Source/FreeImage/Zlib)
set(OGREKIT_ZZIP_TARGET         ZZipLib)
set(OGREKIT_ZZIP_INCLUDE        ${OGREKIT_SOURCE_DIR}/Dependencies/Source/ZZipLib)

set(OGREKIT_BPARSE_TARGET       OgreKitBlend)
set(OGREKIT_BPARSE_INCLUDE      ${OGREKIT_SOURCE_DIR}/Core/bParse ${OGREKIT_SOURCE_DIR}/Core/bParse/autogenerated)


set(OGRELITE_SOURCE_DIR         ${OGREKIT_SOURCE_DIR}/OgreLite)
set(OGREKIT_OGRE_INCLUDE        ${OGRELITE_SOURCE_DIR}/OgreMain/include ${OGRELITE_SOURCE_DIR}/Settings)
set(OGREKIT_GLRS_INCLUDE        ${OGRELITE_SOURCE_DIR}/RenderSystems/GL/include)
set(OGREKIT_GLESRS_INCLUDE      ${OGRELITE_SOURCE_DIR}/RenderSystems/GLES/include)
set(OGREKIT_DX9RS_INCLUDE       ${OGRELITE_SOURCE_DIR}/RenderSystems/Direct3D9/include)
set(OGREKIT_DX10RS_INCLUDE      ${OGRELITE_SOURCE_DIR}/RenderSystems/Direct3D10/include)

set(OGREKIT_OGRE_LIBS           OgreMain OIS ${OGREKIT_FREEIMAGE_TARGET} ${OGREKIT_FREETYPE_TARGET} ${OGREKIT_ZLIB_TARGET} ${OGREKIT_ZZIP_TARGET})
set(OGREKIT_BULLET_LIBS         LinearMath)

set(OGREKIT_BULLET_INCLUDE      ${OGREKIT_SOURCE_DIR}/Dependencies/Source/bullet/src)
set(OGREKIT_OIS_INCLUDE         ${OGREKIT_SOURCE_DIR}/Dependencies/Source/OIS/include)

## TODO ADD Options/Config
set(OGRE_BUILD_RENDERSYSTEM_GL  TRUE)
set(OPENGL_FOUND                TRUE)
set(OGREKIT_GLRS_LIBS           RenderSystem_GL)
set(OGREKIT_GLRS_ROOT           ${OGRELITE_SOURCE_DIR}/RenderSystems/GL)


subdirs(Dependencies)
subdirs(OgreLite)
subdirs(Core)


# Tests for this setup
subdirs(Tests/ImplTest)
subdirs(Tests/ScriptTest)
